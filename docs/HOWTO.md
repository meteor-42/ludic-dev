# üìñ –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø—Ä–æ–µ–∫—Ç—É ludic-dev

## üéØ –ß—Ç–æ —ç—Ç–æ –∑–∞ –ø—Ä–æ–µ–∫—Ç?

–≠—Ç–æ **–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è –±—É–∫–º–µ–∫–µ—Ä—Å–∫–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã** - MVP (–º–∏–Ω–∏–º–∞–ª—å–Ω–æ –∂–∏–∑–Ω–µ—Å–ø–æ—Å–æ–±–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç) –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–π —Å–∏—Å—Ç–µ–º—ã —Å—Ç–∞–≤–æ–∫ –Ω–∞ —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è.

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫:

ludic-dev/
‚îú‚îÄ‚îÄ client/ # Frontend (React + Vite)
‚îÇ ‚îú‚îÄ‚îÄ src/
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ pages/ # –°—Ç—Ä–∞–Ω–∏—Ü—ã (login, dashboard)
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ components/ # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (sidebar, theme-toggle)
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ lib/ # –£—Ç–∏–ª–∏—Ç—ã (auth-context, theme-context)
‚îú‚îÄ‚îÄ server/ # Backend (Express.js)
‚îÇ ‚îú‚îÄ‚îÄ index.ts # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª —Å–µ—Ä–≤–µ—Ä–∞
‚îÇ ‚îú‚îÄ‚îÄ routes.ts # API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
‚îÇ ‚îú‚îÄ‚îÄ storage.ts # –†–∞–±–æ—Ç–∞ —Å –ë–î —á–µ—Ä–µ–∑ Drizzle ORM
‚îÇ ‚îî‚îÄ‚îÄ db.ts # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
‚îú‚îÄ‚îÄ shared/ # –û–±—â–∏–µ —Ç–∏–ø—ã –∏ —Å—Ö–µ–º—ã (TypeScript + Zod)
‚îÇ ‚îî‚îÄ‚îÄ schema.ts # –°—Ö–µ–º—ã –ë–î –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
‚îú‚îÄ‚îÄ docs/ # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
‚îÇ ‚îî‚îÄ‚îÄ architecture.md # –î–∏–∞–≥—Ä–∞–º–º—ã –∏ –ø–ª–∞–Ω –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ script/ # –°–∫—Ä–∏–ø—Ç—ã —Å–±–æ—Ä–∫–∏
‚îÇ ‚îî‚îÄ‚îÄ build.ts # –°–±–æ—Ä–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞ –∏ —Å–µ—Ä–≤–µ—Ä–∞
‚îî‚îÄ‚îÄ migrations/ # –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (Drizzle Kit)

---

## ‚öôÔ∏è –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏

### 1. –ü—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏ (Build)

–ö–æ–≥–¥–∞ –≤—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ `npm run build`, –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–ª–µ–¥—É—é—â–µ–µ:

```bash
npm run build ‚Üí –∑–∞–ø—É—Å–∫–∞–µ—Ç script/build.ts

script/build.ts –¥–µ–ª–∞–µ—Ç –¥–≤–µ –≤–µ—â–∏:
a) –°–æ–±–∏—Ä–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç (React) —á–µ—Ä–µ–∑ Vite:

    –ö–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç TypeScript –≤ JavaScript
    –ú–∏–Ω–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –∫–æ–¥
    –°–æ–∑–¥–∞–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–∞–Ω–¥–ª—ã
    –†–µ–∑—É–ª—å—Ç–∞—Ç: dist/public/ (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ HTML/CSS/JS —Ñ–∞–π–ª—ã)

b) –°–æ–±–∏—Ä–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä (Express) —á–µ—Ä–µ–∑ esbuild:

    –ë–∞–Ω–¥–ª–∏—Ç –≤—Å–µ —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ –æ–¥–∏–Ω dist/index.cjs
    –ú–∏–Ω–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –∫–æ–¥
    –í—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (Drizzle ORM, Express, PocketBase SDK –∏ –¥—Ä.)
    –í–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Å—Ç–∞—é—Ç—Å—è –≤ node_modules

–ü–æ—á–µ–º—É —Ç–∞–∫ –¥–µ–ª–∞–µ—Ç—Å—è?

    ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Ö–æ–ª–æ–¥–Ω—ã–π —Å—Ç–∞—Ä—Ç (–º–µ–Ω—å—à–µ —Ñ–∞–π–ª–æ–≤ –¥–ª—è —á—Ç–µ–Ω–∏—è)
    üì¶ –û–¥–∏–Ω –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª —Å–µ—Ä–≤–µ—Ä–∞
    üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è production

2. –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ production

–ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:

npm start ‚Üí NODE_ENV=production node dist/index.cjs

–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–∏:

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –±—Ä–∞—É–∑–µ—Ä            ‚îÇ
‚îÇ         http://–≤–∞—à-–¥–æ–º–µ–Ω:5000              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                 ‚îÇ
                 ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ     Express —Å–µ—Ä–≤–µ—Ä (–ø–æ—Ä—Ç 5000)              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å /api:       ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ   ‚Üí –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ server/routes.ts ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ                                       ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ –ï—Å–ª–∏ –¥—Ä—É–≥–æ–π –ø—É—Ç—å:                    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ   ‚Üí –æ—Ç–¥–∞—Ç—å —Ñ–∞–π–ª—ã –∏–∑ dist/public/     ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

üîÑ –ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∑–∞–ø—Ä–æ—Å—ã
–°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ö–æ–¥–∏—Ç –Ω–∞ —Å–∞–π—Ç

1. –ë—Ä–∞—É–∑–µ—Ä ‚Üí GET / –∏–ª–∏ /login
           ‚Üì
2. Express –ø—Ä–æ–≤–µ—Ä—è–µ—Ç: —ç—Ç–æ –Ω–µ /api/*
           ‚Üì
3. –û—Ç–¥–∞–µ—Ç index.html –∏–∑ dist/public/
           ‚Üì
4. React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ
           ‚Üì
5. React Router (wouter) –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º–∞—Ä—à—Ä—É—Ç
           ‚Üì
6. AuthContext –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–∫–µ–Ω –≤ localStorage
           ‚Üì
7. –ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –µ—Å—Ç—å ‚Üí GET /api/auth/me ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏
           ‚Üì
8. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç LoginPage –∏–ª–∏ DashboardPage

–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç email/–ø–∞—Ä–æ–ª—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ª–æ–≥–∏–Ω–∞
           ‚Üì
2. React –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ñ–æ—Ä–º—É (Zod + React Hook Form)
           ‚Üì
3. React –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç: POST /api/auth/login
   Body: { email: "user@example.com", password: "123456" }
           ‚Üì
4. Express –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –≤ server/routes.ts
           ‚Üì
5. –°–æ–∑–¥–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç PocketBase (–≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å)
   const pb = new PocketBase(process.env.POCKETBASE_URL)
           ‚Üì
6. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –≤ PocketBase:
   pb.collection("users").authWithPassword(email, password)
           ‚Üì
7. PocketBase –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–≤–æ–µ–π –ë–î
   - –ù–∞—Ö–æ–¥–∏—Ç user –ø–æ email
   - –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Ö–µ—à –ø–∞—Ä–æ–ª—è (bcrypt)
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç JWT —Ç–æ–∫–µ–Ω (—Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è ~2 –Ω–µ–¥–µ–ª–∏)
           ‚Üì
8. PocketBase –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç: { token: "abc123...", record: {...} }
           ‚Üì
9. Express –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—Ç–≤–µ—Ç:
   - –ò–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∫–æ—à–µ–ª—å–∫–∞
   - –ï—Å–ª–∏ –∫–æ—à–µ–ª—å–∫–∞ –Ω–µ—Ç ‚Üí —Å–æ–∑–¥–∞–µ—Ç:
     storage.createWallet(userId) ‚Üí INSERT INTO wallets
           ‚Üì
10. Express –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–ª–∏–µ–Ω—Ç—É:
    { user: { id, email, name, avatar }, token: "abc123..." }
           ‚Üì
11. React (AuthContext) —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ:
    localStorage.setItem("auth_token", token)
    localStorage.setItem("auth_user", JSON.stringify(user))
    setState({ user, token, isAuthenticated: true })
           ‚Üì
12. Redirect –Ω–∞ /dashboard

–°—Ü–µ–Ω–∞—Ä–∏–π 3: –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç–∞–≤–∫–∏

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ –¥–∞—à–±–æ—Ä–¥–µ –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É —Å—Ç–∞–≤–∫–∏:
   - –°–æ–±—ã—Ç–∏–µ: "–§—É—Ç–±–æ–ª: –ë–∞—Ä—Å–µ–ª–æ–Ω–∞ vs –†–µ–∞–ª"
   - –í—ã–±–æ—Ä: "–ë–∞—Ä—Å–µ–ª–æ–Ω–∞"
   - –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç: 2.5
   - –°—É–º–º–∞: 100
           ‚Üì
2. React –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç: POST /api/bets
   Headers: { Authorization: "Bearer abc123..." }
   Body: { eventName, selection, odds, amount }
           ‚Üì
3. Express –≤—ã–∑—ã–≤–∞–µ—Ç verifyToken(req.headers.authorization):
   - –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–æ–∫–µ–Ω –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞
   - –°–æ–∑–¥–∞–µ—Ç PocketBase –∫–ª–∏–µ–Ω—Ç
   - pb.authStore.save(token, null)
   - pb.collection("users").authRefresh()
   - PocketBase –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–∫–µ–Ω –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç userId
           ‚Üì
4. Express –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –±–∞–ª–∞–Ω—Å –≤ PostgreSQL:
   storage.getWalletByUserId(userId)
   SELECT * FROM wallets WHERE user_id = '...'
   –†–µ–∑—É–ª—å—Ç–∞—Ç: { balance: "1000.00" }
           ‚Üì
5. –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Zod:
   insertBetSchema.safeParse({ eventName, selection, odds, amount, userId })
           ‚Üì
6. –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞:
   if (amount > currentBalance) ‚Üí 400 "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤"
   if (amount <= 0) ‚Üí 400 "–°—É–º–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–π"
           ‚Üì
7. –†–∞—Å—á–µ—Ç –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ –≤—ã–∏–≥—Ä—ã—à–∞:
   potentialWin = amount * odds = 100 * 2.5 = 250.00
           ‚Üì
8. –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç–∞–≤–∫–∏ –≤ PostgreSQL (—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è):
   storage.createBet({
     userId, eventName, selection, odds, amount, potentialWin
   })
   INSERT INTO bets (...) VALUES (...) RETURNING *
           ‚Üì
9. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞:
   newBalance = currentBalance - amount = 1000 - 100 = 900
   storage.updateBalance(userId, "900.00")
   UPDATE wallets SET balance = '900.00' WHERE user_id = '...'
           ‚Üì
10. –í–æ–∑–≤—Ä–∞—Ç —Å—Ç–∞–≤–∫–∏ –∫–ª–∏–µ–Ω—Ç—É:
    { id: 1, eventName: "...", status: "pending", amount: "100.00", ... }
           ‚Üì
11. React –æ–±–Ω–æ–≤–ª—è–µ—Ç UI:
    - TanStack Query –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∫—ç—à
    - –ü–µ—Ä–µ–∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Å—Ç–∞–≤–æ–∫ –∏ –±–∞–ª–∞–Ω—Å
    - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–æ–≤—É—é —Å—Ç–∞–≤–∫—É –≤ —Ç–∞–±–ª–∏—Ü–µ

–°—Ü–µ–Ω–∞—Ä–∏–π 4: –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ —Å—Ç–∞–≤–æ–∫

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É /history
           ‚Üì
2. React –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç: GET /api/bets
   Headers: { Authorization: "Bearer abc123..." }
           ‚Üì
3. Express –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–∫–µ–Ω ‚Üí –ø–æ–ª—É—á–∞–µ—Ç userId
           ‚Üì
4. –ó–∞–ø—Ä–æ—Å –∫ –ë–î:
   storage.getBetsByUserId(userId)
   SELECT * FROM bets WHERE user_id = '...' ORDER BY created_at DESC
           ‚Üì
5. –í–æ–∑–≤—Ä–∞—Ç –º–∞—Å—Å–∏–≤–∞ —Å—Ç–∞–≤–æ–∫:
   [
     { id: 1, eventName: "...", status: "pending", ... },
     { id: 2, eventName: "...", status: "won", result: "win", ... }
   ]
           ‚Üì
6. React —Ä–µ–Ω–¥–µ—Ä–∏—Ç —Ç–∞–±–ª–∏—Ü—É —Å –∏—Å—Ç–æ—Ä–∏–µ–π

üóÑÔ∏è –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏: –ö–ª–∏–µ–Ω—Ç vs –°–µ—Ä–≤–µ—Ä
–ù–∞ –∫–ª–∏–µ–Ω—Ç–µ (React –≤ –±—Ä–∞—É–∑–µ—Ä–µ):
‚úÖ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç:

    UI —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥: –§–æ—Ä–º—ã, —Ç–∞–±–ª–∏—Ü—ã, –∫–Ω–æ–ø–∫–∏, –º–æ–¥–∞–ª–∫–∏ (shadcn/ui)
    –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º: React Hook Form + Zod (–ø–µ—Ä–≤–∏—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞)
    –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º:
        useState, useEffect
        TanStack Query (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ API –∑–∞–ø—Ä–æ—Å–æ–≤)
        AuthContext (–≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
    –†–æ—É—Ç–∏–Ω–≥: wouter (SPA navigation)
    –ê–Ω–∏–º–∞—Ü–∏–∏: Framer Motion
    –¢–µ–º–Ω–∞—è/—Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞: next-themes + CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
    –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ: localStorage (—Ç–æ–∫–µ–Ω, user data)

‚ùå –ß—Ç–æ –ù–ï –¥–µ–ª–∞–µ—Ç:

    –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π (—Ç–æ–ª—å–∫–æ —Ç–æ–∫–µ–Ω)
    –§–∏–Ω–∞–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è (—ç—Ç–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
    –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Å—Ç–∞–≤–æ–∫ (—Ä–∞—Å—á–µ—Ç –≤—ã–∏–≥—Ä—ã—à–∞, –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞)
    –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
    –ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (Express):
‚úÖ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç:

    –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ PocketBase
    –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏: –í–∞–ª–∏–¥–∞—Ü–∏—è JWT –Ω–∞ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å
    –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞:
        –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –ø–µ—Ä–µ–¥ —Å—Ç–∞–≤–∫–æ–π
        –†–∞—Å—á–µ—Ç –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ –≤—ã–∏–≥—Ä—ã—à–∞
        –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ
    –†–∞–±–æ—Ç–∞ —Å –ë–î:
        PostgreSQL —á–µ—Ä–µ–∑ Drizzle ORM
        CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ (wallets, bets)
    –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö: Zod —Å—Ö–µ–º—ã (–∑–∞—â–∏—Ç–∞ –æ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)
    –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: –ó–∞–ø–∏—Å—å –≤—Å–µ—Ö API –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –∫–æ–Ω—Å–æ–ª—å
    –°—Ç–∞—Ç–∏–∫–∞: –†–∞–∑–¥–∞—á–∞ React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ production

‚ùå –ß—Ç–æ –ù–ï –¥–µ–ª–∞–µ—Ç:

    –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ HTML (—ç—Ç–æ –¥–µ–ª–∞–µ—Ç React –≤ –±—Ä–∞—É–∑–µ—Ä–µ)
    –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π (—ç—Ç–æ –¥–µ–ª–∞–µ—Ç PocketBase)
    –°–ª–æ–∂–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –Ω–∞ CPU (—ç—Ç–æ –±—É–¥—É—â–µ–µ: –∞–Ω–∞–ª–∏—Ç–∏–∫–∞, ML)

üóÑÔ∏è –ö–∞–∫–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
1. PocketBase (–≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å)

URL: process.env.POCKETBASE_URL

–•—Ä–∞–Ω–∏—Ç:

Collection: users
- id (string, auto)
- email (string, unique)
- password (string, hashed with bcrypt)
- name (string, optional)
- username (string, optional)
- avatar (file, optional)
- created (datetime)
- updated (datetime)

–§—É–Ω–∫—Ü–∏–∏:

    –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (email + password)
    –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ JWT —Ç–æ–∫–µ–Ω–æ–≤
    –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π (bcrypt)
    –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ (authRefresh)

–ü–æ—á–µ–º—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:

    ‚úÖ –ì–æ—Ç–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è auth (–Ω–µ –Ω—É–∂–Ω–æ –ø–∏—Å–∞—Ç—å —Å –Ω—É–ª—è)
    ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
    ‚úÖ REST API + SDK
    ‚úÖ Admin UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

2. PostgreSQL (–Ω–∞ Replit)

URL: process.env.DATABASE_URL

–°—Ö–µ–º–∞ –ë–î:

-- –¢–∞–±–ª–∏—Ü–∞ –∫–æ—à–µ–ª—å–∫–æ–≤ (–≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –≤–∞–ª—é—Ç–∞)
CREATE TABLE wallets (
  id SERIAL PRIMARY KEY,
  user_id VARCHAR(255) UNIQUE NOT NULL,  -- —Å–≤—è–∑—å —Å PocketBase user.id
  balance DECIMAL(12,2) NOT NULL DEFAULT 1000.00,
  created_at TIMESTAMP NOT NULL DEFAULT NOW(),
  updated_at TIMESTAMP NOT NULL DEFAULT NOW()
);

-- –¢–∞–±–ª–∏—Ü–∞ —Å—Ç–∞–≤–æ–∫
CREATE TABLE bets (
  id SERIAL PRIMARY KEY,
  user_id VARCHAR(255) NOT NULL,         -- —Å–≤—è–∑—å —Å PocketBase user.id
  event_name TEXT NOT NULL,              -- "–§—É—Ç–±–æ–ª: –ë–∞—Ä—Å–µ–ª–æ–Ω–∞ vs –†–µ–∞–ª"
  selection TEXT NOT NULL,               -- "–ë–∞—Ä—Å–µ–ª–æ–Ω–∞"
  odds DECIMAL(6,2) NOT NULL,            -- 2.50
  amount DECIMAL(12,2) NOT NULL,         -- 100.00
  potential_win DECIMAL(12,2) NOT NULL,  -- 250.00
  status VARCHAR(20) NOT NULL DEFAULT 'pending',  -- pending, won, lost
  result VARCHAR(20),                    -- win, loss, NULL
  created_at TIMESTAMP NOT NULL DEFAULT NOW(),
  settled_at TIMESTAMP                   -- –∫–æ–≥–¥–∞ —Å—Ç–∞–≤–∫–∞ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–∞
);

–§—É–Ω–∫—Ü–∏–∏:

    –•—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–±–∞–ª–∞–Ω—Å—ã)
    –ò—Å—Ç–æ—Ä–∏—è —Å—Ç–∞–≤–æ–∫
    –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (—Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ç–∞–≤–∫–∏ + –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞)

–ü–æ—á–µ–º—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:

    ‚úÖ –†–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    ‚úÖ ACID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (–≤–∞–∂–Ω–æ –¥–ª—è –¥–µ–Ω–µ–≥!)
    ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
    ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (JOIN, –∞–≥—Ä–µ–≥–∞—Ü–∏—è)

–°–≤—è–∑—å –º–µ–∂–¥—É –ë–î:

PocketBase (users)          PostgreSQL (wallets, bets)
     ‚Üì                              ‚Üì
user.id -----(—Å–≤—è–∑—å –ø–æ user_id)---> wallets.user_id
                                    bets.user_id

–í–∞–∂–Ω–æ: –°–≤—è–∑—å –Ω–µ —á–µ—Ä–µ–∑ FOREIGN KEY, –∞ –ª–æ–≥–∏—á–µ—Å–∫–∞—è (—Ä–∞–∑–Ω—ã–µ –ë–î)
üîê –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
1. –ü–∞—Ä–æ–ª–∏

    ‚ùå –ù–ï —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∫–æ–¥–µ –∏–ª–∏ PostgreSQL
    ‚úÖ –•—Ä–∞–Ω—è—Ç—Å—è –≤ PocketBase –∫–∞–∫ bcrypt hash
    ‚úÖ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ PocketBase (—Å–µ—Ä–≤–µ—Ä –Ω–µ –≤–∏–¥–∏—Ç –ø–∞—Ä–æ–ª—å)

2. JWT —Ç–æ–∫–µ–Ω—ã

    –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è PocketBase –ø—Ä–∏ –ª–æ–≥–∏–Ω–µ
    –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è: ~2 –Ω–µ–¥–µ–ª–∏
    –•—Ä–∞–Ω—è—Ç—Å—è –≤ localStorage –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
    –ü–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ: Authorization: Bearer <token>
    –ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ –∫–∞–∂–¥—ã–π API –∑–∞–ø—Ä–æ—Å

3. –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

    –ù–∞ –∫–ª–∏–µ–Ω—Ç–µ: Zod —Å—Ö–µ–º—ã (–ø–µ—Ä–≤–∏—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ UI)
    –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ: Zod —Å—Ö–µ–º—ã (—Ñ–∏–Ω–∞–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –∞—Ç–∞–∫)

// shared/schema.ts
export const insertBetSchema = createInsertSchema(bets).omit({...})
export const loginSchema = z.object({
  email: z.string().email("–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email"),
  password: z.string().min(6, "–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 6 —Å–∏–º–≤–æ–ª–æ–≤")
})

4. SQL –∏–Ω—ä–µ–∫—Ü–∏–∏

    ‚úÖ –ó–∞—â–∏—â–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ Drizzle ORM
    ‚ùå –ù–∏–∫–∞–∫–∏—Ö —Å—ã—Ä—ã—Ö SQL —Å—Ç—Ä–æ–∫ —Å –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

5. XSS (Cross-Site Scripting)

    ‚úÖ React –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç –≤—ã–≤–æ–¥
    ‚úÖ –ù–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è dangerouslySetInnerHTML

6. CSRF (Cross-Site Request Forgery)

    ‚úÖ JWT –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö (–Ω–µ –≤ cookies)
    ‚úÖ SameSite –ø–æ–ª–∏—Ç–∏–∫–∞

üîÑ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –æ—Ç –Ω—É–ª—è
–®–∞–≥ 1: Provisioning PostgreSQL –Ω–∞ Replit

# Replit –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç DATABASE_URL –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ PostgreSQL
# –í—Ä—É—á–Ω—É—é: Tools ‚Üí Database ‚Üí PostgreSQL

–®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ö–µ–º—ã

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–∏–≥—Ä–∞—Ü–∏–π –∏–∑ shared/schema.ts
npm run db:push

# Drizzle Kit —á–∏—Ç–∞–µ—Ç schema.ts –∏ —Å–æ–∑–¥–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—ã:
# CREATE TABLE wallets (...)
# CREATE TABLE bets (...)

–®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PocketBase

    –°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ pocketbase.io –∏–ª–∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Å–≤–æ–π
    –°–æ–∑–¥–∞—Ç—å collection users —Å –ø–æ–ª—è–º–∏:
        email (Email, Required, Unique)
        password (Password, Min 6 chars)
        name (Text, Optional)
    –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å URL –∏ –¥–æ–±–∞–≤–∏—Ç—å –≤ .env:

    POCKETBASE_URL=https://your-instance.pocketbase.io

–®–∞–≥ 4: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

// –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –ª–æ–≥–∏–Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–æ—à–µ–ª–µ–∫:
if (!wallet) {
  wallet = await storage.createWallet(userId)
  // INSERT INTO wallets (user_id, balance) VALUES ('...', 1000.00)
}

üöÄ –î–µ–ø–ª–æ–π –Ω–∞ AlmaLinux (–ë–ï–ó Docker)

    –í–Ω–∏–º–∞–Ω–∏–µ: –ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è Replit, –Ω–æ –º–æ–∂–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ –ª—é–±–æ–º Linux —Å–µ—Ä–≤–µ—Ä–µ.

–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js 20+
curl -fsSL https://rpm.nodesource.com/setup_20.x | sudo bash -
sudo dnf install -y nodejs

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL 15+
sudo dnf install -y postgresql15-server postgresql15
sudo postgresql-setup --initdb
sudo systemctl enable postgresql
sudo systemctl start postgresql

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PM2 (–ø—Ä–æ—Ü–µ—Å—Å-–º–µ–Ω–µ–¥–∂–µ—Ä)
sudo npm install -g pm2

–®–∞–≥ 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–±–æ—Ä–∫–∞

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/meteor-42/ludic-dev.git
cd ludic-dev

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
npm run build
# –†–µ–∑—É–ª—å—Ç–∞—Ç:
# - dist/index.cjs (—Å–µ—Ä–≤–µ—Ä)
# - dist/public/ (–∫–ª–∏–µ–Ω—Ç)

–®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL

# –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ë–î
sudo -u postgres psql

CREATE USER ludic_user WITH PASSWORD 'secure_password_123';
CREATE DATABASE ludic_db OWNER ludic_user;
\q

# –†–∞–∑—Ä–µ—à–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
sudo nano /var/lib/pgsql/15/data/pg_hba.conf
# –î–æ–±–∞–≤–∏—Ç—å: host ludic_db ludic_user 127.0.0.1/32 md5

sudo systemctl restart postgresql

–®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

# –°–æ–∑–¥–∞—Ç—å .env —Ñ–∞–π–ª
nano .env

NODE_ENV=production
PORT=5000
DATABASE_URL=postgresql://ludic_user:secure_password_123@localhost:5432/ludic_db
POCKETBASE_URL=https://your-pocketbase-instance.com

–®–∞–≥ 4: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î

# –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –≤ PostgreSQL
npm run db:push

# –ü—Ä–æ–≤–µ—Ä–∫–∞
psql -U ludic_user -d ludic_db -c "\dt"
# –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è: wallets, bets

–®–∞–≥ 5: –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

# –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ PM2 (–∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ)
pm2 start dist/index.cjs --name ludic-app

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
pm2 logs ludic-app

# –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å–µ—Ä–≤–µ—Ä–∞
pm2 startup
pm2 save

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
pm2 status

–®–∞–≥ 6: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx (reverse proxy)

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Nginx
sudo dnf install -y nginx

# –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥
sudo nano /etc/nginx/conf.d/ludic.conf

server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://localhost:5000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}

# –ó–∞–ø—É—Å–∫ Nginx
sudo systemctl enable nginx
sudo systemctl start nginx

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥–∞
sudo nginx -t

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞
sudo systemctl reload nginx

–®–∞–≥ 7: SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (Let's Encrypt)

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Certbot
sudo dnf install -y certbot python3-certbot-nginx

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
sudo certbot --nginx -d your-domain.com

# –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–ø—Ä–æ–≤–µ—Ä–∫–∞)
sudo certbot renew --dry-run

–®–∞–≥ 8: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Firewall

# –û—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç—ã
sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --add-service=https
sudo firewall-cmd --reload

# –ü—Ä–æ–≤–µ—Ä–∫–∞
sudo firewall-cmd --list-all

üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏

# –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
pm2 logs ludic-app

# –õ–æ–≥–∏ Nginx
sudo tail -f /var/log/nginx/access.log
sudo tail -f /var/log/nginx/error.log

# –õ–æ–≥–∏ PostgreSQL
sudo tail -f /var/lib/pgsql/15/data/log/postgresql-*.log

# –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
pm2 monit

üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

# Pull –Ω–æ–≤—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
cd ludic-dev
git pull origin main

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –°–±–æ—Ä–∫–∞
npm run build

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π (–µ—Å–ª–∏ –µ—Å—Ç—å)
npm run db:push

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
pm2 restart ludic-app

üéØ –†–µ–∑—é–º–µ: –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö –æ—Ç –∫–ª–∏–∫–∞ –¥–æ –ë–î

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∏–∫–∞–µ—Ç –∫–Ω–æ–ø–∫—É –≤ React
           ‚Üì
2. React –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç (Zod) –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç fetch()
           ‚Üì
3. –ó–∞–ø—Ä–æ—Å –∏–¥–µ—Ç –Ω–∞ localhost:5000/api/*
           ‚Üì
4. Nginx (–µ—Å–ª–∏ –µ—Å—Ç—å) –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –Ω–∞ Express
           ‚Üì
5. Express middleware –ª–æ–≥–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å
           ‚Üì
6. routes.ts –ø—Ä–æ–≤–µ—Ä—è–µ—Ç JWT —á–µ—Ä–µ–∑ PocketBase
           ‚Üì
7. –ï—Å–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω ‚Üí –≤—ã–ø–æ–ª–Ω—è–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É
           ‚Üì
8. storage.ts –≤—ã–∑—ã–≤–∞–µ—Ç Drizzle ORM
           ‚Üì
9. Drizzle –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç SQL –∑–∞–ø—Ä–æ—Å
           ‚Üì
10. PostgreSQL –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
           ‚Üì
11. Express —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç –≤ JSON
           ‚Üì
12. React –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç UI

üìù –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

# Development —Ä–µ–∂–∏–º (hot reload)
npm run dev

# Production —Å–±–æ—Ä–∫–∞
npm run build
npm start

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ TypeScript
npm run check

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î
npm run db:push

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π (–µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–∏ schema.ts)
npx drizzle-kit generate:pg

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ë–î —á–µ—Ä–µ–∑ Drizzle Studio
npx drizzle-kit studio

üêõ –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è
–ü—Ä–æ–±–ª–µ–º–∞: "DATABASE_URL must be set"

–†–µ—à–µ–Ω–∏–µ:

# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ .env —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
cat .env | grep DATABASE_URL

# –ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Ä—É—á–Ω—É—é
export DATABASE_URL="postgresql://user:pass@localhost:5432/dbname"

–ü—Ä–æ–±–ª–µ–º–∞: "PocketBase connection failed"

–†–µ—à–µ–Ω–∏–µ:

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL
curl https://your-pocketbase-url.com/api/health

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
echo $POCKETBASE_URL

–ü—Ä–æ–±–ª–µ–º–∞: "Port 5000 already in use"

–†–µ—à–µ–Ω–∏–µ:

# –ù–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å
lsof -i :5000

# –£–±–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
kill -9 <PID>

# –ò–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç
export PORT=3000

üèÜ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

‚úÖ –û–¥–∏–Ω –ø–æ—Ä—Ç (5000) - –Ω–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å CORS
‚úÖ SPA + API –Ω–∞ –æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ - –ø—Ä–æ—Å—Ç–æ–π –¥–µ–ø–ª–æ–π
‚úÖ TypeScript –≤–µ–∑–¥–µ - —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
‚úÖ Drizzle ORM - –∑–∞—â–∏—Ç–∞ –æ—Ç SQL –∏–Ω—ä–µ–∫—Ü–∏–π
‚úÖ PocketBase - –≥–æ—Ç–æ–≤–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚úÖ shadcn/ui - –∫—Ä–∞—Å–∏–≤—ã–π UI –∏–∑ –∫–æ—Ä–æ–±–∫–∏
‚úÖ –õ–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è - —Å–º. docs/architecture.md
üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

    –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è: docs/architecture.md
    –°—Ö–µ–º–∞ –ë–î: shared/schema.ts
    API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã: server/routes.ts
    –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã UI: client/src/components/

–ê–≤—Ç–æ—Ä: meteor-42
–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2024-12-06
–í–µ—Ä—Å–∏—è: 1.0.0 (MVP)

---

–í—ã –º–æ–∂–µ—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Å—å —ç—Ç–æ—Ç —Ç–µ–∫—Å—Ç –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ —Ñ–∞–π–ª. –•–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã —è —É—Ç–≤–µ—Ä–¥–∏–ª –ø–ª–∞–Ω –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–ª —ç—Ç–æ—Ç —Ñ–∞–π–ª –≤ –ø—Ä–æ–µ–∫—Ç–µ?
