๐ ะะพะดัะพะฑะฝัะน ะฐะฝะฐะปะธะท ะฟัะพะตะบัะฐ ludic-dev
๐ฏ ะงัะพ ััะพ ะทะฐ ะฟัะพะตะบั?

ะญัะพ ะผะธะบัะพัะตัะฒะธั ะฐะฒัะพัะธะทะฐัะธะธ ะดะปั ะฑัะบะผะตะบะตััะบะพะน ะฟะปะฐััะพัะผั - MVP (ะผะธะฝะธะผะฐะปัะฝะพ ะถะธะทะฝะตัะฟะพัะพะฑะฝัะน ะฟัะพะดัะบั) ะดะปั ะผะฐัััะฐะฑะธััะตะผะพะน ัะธััะตะผั ััะฐะฒะพะบ ะฝะฐ ัะฟะพััะธะฒะฝัะต ัะพะฑััะธั.
๐๏ธ ะััะธัะตะบัััะฐ ะฟัะพะตะบัะฐ
ะกัััะบัััะฐ ะฟะฐะฟะพะบ:

ludic-dev/
โโโ client/          # Frontend (React + Vite)
โโโ server/          # Backend (Express.js)
โโโ shared/          # ะะฑัะธะต ัะธะฟั ะธ ััะตะผั (TypeScript + Zod)
โโโ docs/            # ะะพะบัะผะตะฝัะฐัะธั ะฐััะธัะตะบัััั
โโโ script/          # ะกะบัะธะฟัั ัะฑะพัะบะธ
โโโ migrations/      # ะะธะณัะฐัะธะธ ะฑะฐะทั ะดะฐะฝะฝัั

โ๏ธ ะะฐะบ ัะฐะฑะพัะฐะตั ะฟัะธะปะพะถะตะฝะธะต ะฟะพัะปะต ัะฑะพัะบะธ
1. ะัะพัะตัั ัะฑะพัะบะธ (Build)

ะะพะณะดะฐ ะฒั ะทะฐะฟััะบะฐะตัะต npm run build, ะฟัะพะธััะพะดะธั ัะปะตะดัััะตะต:

npm run build โ ะทะฐะฟััะบะฐะตั script/build.ts

script/build.ts ะดะตะปะฐะตั ะดะฒะต ะฒะตัะธ:

    ะกะพะฑะธัะฐะตั ะบะปะธะตะฝั (React) ัะตัะตะท Vite:
        ะะพะผะฟะธะปะธััะตั TypeScript ะฒ JavaScript
        ะะธะฝะธัะธัะธััะตั ะบะพะด
        ะกะพะทะดะฐะตั ะพะฟัะธะผะธะทะธัะพะฒะฐะฝะฝัะต ะฑะฐะฝะดะปั
        ะะตะทัะปััะฐั: dist/public/ (ััะฐัะธัะตัะบะธะต HTML/CSS/JS ัะฐะนะปั)

    ะกะพะฑะธัะฐะตั ัะตัะฒะตั (Express) ัะตัะตะท esbuild:
        ะะฐะฝะดะปะธั ะฒัะต ัะตัะฒะตัะฝัะต ัะฐะนะปั ะฒ ะพะดะธะฝ dist/index.cjs
        ะะธะฝะธัะธัะธััะตั ะบะพะด
        ะัััะฐะธะฒะฐะตั ะบัะธัะธัะฝัะต ะทะฐะฒะธัะธะผะพััะธ (Drizzle ORM, Express ะธ ะดั.)
        ะะฝะตัะฝะธะต ะทะฐะฒะธัะธะผะพััะธ ะพััะฐัััั ะฒ node_modules

ะะพัะตะผั ัะฐะบ ะดะตะปะฐะตััั?

    โก ะัััััะน ัะพะปะพะดะฝัะน ััะฐัั (ะผะตะฝััะต ัะฐะนะปะพะฒ ะดะปั ััะตะฝะธั)
    ๐ฆ ะะดะธะฝ ะธัะฟะพะปะฝัะตะผัะน ัะฐะนะป ัะตัะฒะตัะฐ
    ๐ ะะฟัะธะผะธะทะฐัะธั ะดะปั production

2. ะะฐะบ ัะฐะฑะพัะฐะตั ะฟัะธะปะพะถะตะฝะธะต ะฒ production

ะะพัะปะต ัะฑะพัะบะธ ะทะฐะฟััะบะฐะตััั:

npm start โ NODE_ENV=production node dist/index.cjs

ะงัะพ ะฟัะพะธััะพะดะธั ะฒะฝัััะธ:

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ะะพะปัะทะพะฒะฐัะตะปั ะพัะบััะฒะฐะตั ะฑัะฐัะทะตั            โ
โ         http://ะฒะฐั-ะดะพะผะตะฝ:5000              โ
โโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                 โ
                 โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ     Express ัะตัะฒะตั (ะฟะพัั 5000)              โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ ะัะปะธ ะทะฐะฟัะพั ะฝะฐัะธะฝะฐะตััั ั /api:       โ   โ
โ  โ   โ ะพะฑัะฐะฑะพัะบะฐ ัะตัะตะท server/routes.ts โ   โ
โ  โ                                       โ   โ
โ  โ ะัะปะธ ะดััะณะพะน ะฟััั:                    โ   โ
โ  โ   โ ะพัะดะฐัั ัะฐะนะปั ะธะท dist/public/     โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

๐ ะะฐะบ ะพะฑัะฐะฑะฐััะฒะฐัััั ะทะฐะฟัะพัั
ะกัะตะฝะฐัะธะน 1: ะะพะปัะทะพะฒะฐัะตะปั ะทะฐัะพะดะธั ะฝะฐ ัะฐะนั

1. ะัะฐัะทะตั โ GET / ะธะปะธ /login
           โ
2. Express ะฟัะพะฒะตััะตั: ััะพ ะฝะต /api/*
           โ
3. ะัะดะฐะตั index.html ะธะท dist/public/
           โ
4. React ะฟัะธะปะพะถะตะฝะธะต ะทะฐะณััะถะฐะตััั ะฒ ะฑัะฐัะทะตัะต
           โ
5. React Router (wouter) ะพะฟัะตะดะตะปัะตั ะผะฐััััั
           โ
6. ะะพะบะฐะทัะฒะฐะตั LoginPage ะธะปะธ DashboardPage

ะกัะตะฝะฐัะธะน 2: ะะฒัะพัะธะทะฐัะธั ะฟะพะปัะทะพะฒะฐัะตะปั

1. ะะพะปัะทะพะฒะฐัะตะปั ะฒะฒะพะดะธั email/ะฟะฐัะพะปั ะฝะฐ ัััะฐะฝะธัะต ะปะพะณะธะฝะฐ
           โ
2. React ะพัะฟัะฐะฒะปัะตั: POST /api/auth/login
   Body: { email: "user@example.com", password: "123456" }
           โ
3. Express ะฟะพะปััะฐะตั ะทะฐะฟัะพั ะฒ server/routes.ts
           โ
4. ะกะพะทะดะฐะตั ะบะปะธะตะฝั PocketBase (ะฒะฝะตัะฝะธะน ัะตัะฒะธั)
           โ
5. ะัะฟัะฐะฒะปัะตั ะทะฐะฟัะพั ะฒ PocketBase:
   pb.collection("users").authWithPassword(email, password)
           โ
6. PocketBase ะฟัะพะฒะตััะตั ะฟะพะปัะทะพะฒะฐัะตะปั ะฒ ัะฒะพะตะน ะะ
   - ะกัะฐะฒะฝะธะฒะฐะตั ัะตั ะฟะฐัะพะปั
   - ะะตะฝะตัะธััะตั JWT ัะพะบะตะฝ
           โ
7. PocketBase ะฒะพะทะฒัะฐัะฐะตั: { token: "abc123...", record: {...} }
           โ
8. Express ะพะฑัะฐะฑะฐััะฒะฐะตั ะพัะฒะตั ะธ ัะพะทะดะฐะตั ะบะพัะตะปะตะบ (ะตัะปะธ ะฝะตั):
   storage.createWallet(userId) โ INSERT ะฒ PostgreSQL
           โ
9. Express ะพัะฟัะฐะฒะปัะตั ะบะปะธะตะฝัั:
   { user: {...}, token: "abc123..." }
           โ
10. React ัะพััะฐะฝัะตั ัะพะบะตะฝ ะฒ localStorage
    localStorage.setItem("auth_token", token)
           โ
11. Redirect ะฝะฐ /dashboard

ะกัะตะฝะฐัะธะน 3: ะกะพะทะดะฐะฝะธะต ััะฐะฒะบะธ

1. ะะพะปัะทะพะฒะฐัะตะปั ะฝะฐ ะดะฐัะฑะพัะดะต ัะพะทะดะฐะตั ััะฐะฒะบั:
   - ะกะพะฑััะธะต: "ะคััะฑะพะป: ะะฐััะตะปะพะฝะฐ vs ะะตะฐะป"
   - ะัะฑะพั: "ะะฐััะตะปะพะฝะฐ"
   - ะะพัััะธัะธะตะฝั: 2.5
   - ะกัะผะผะฐ: 100
           โ
2. React ะพัะฟัะฐะฒะปัะตั: POST /api/bets
   Headers: { Authorization: "Bearer abc123..." }
   Body: { eventName, selection, odds, amount }
           โ
3. Express ะฟัะพะฒะตััะตั ัะพะบะตะฝ ัะตัะตะท verifyToken():
   - ะัะฟัะฐะฒะปัะตั ัะพะบะตะฝ ะฒ PocketBase
   - PocketBase.authRefresh() ะฟัะพะฒะตััะตั ะฒะฐะปะธะดะฝะพััั
   - ะะพะทะฒัะฐัะฐะตั userId
           โ
4. Express ะฟัะพะฒะตััะตั ะฑะฐะปะฐะฝั ะฒ PostgreSQL:
   SELECT * FROM wallets WHERE user_id = '...'
   - ะะฐะปะฐะฝั: 1000.00
           โ
5. ะัะพะฒะตัะบะฐ: 100 <= 1000? โ ะะ
           โ
6. ะะฐััะตั ะฟะพัะตะฝัะธะฐะปัะฝะพะณะพ ะฒัะธะณัััะฐ:
   potentialWin = 100 * 2.5 = 250.00
           โ
7. ะกะพะทะดะฐะฝะธะต ััะฐะฒะบะธ ะฒ PostgreSQL:
   INSERT INTO bets (user_id, event_name, ..., potential_win)
           โ
8. ะะฑะฝะพะฒะปะตะฝะธะต ะฑะฐะปะฐะฝัะฐ:
   UPDATE wallets SET balance = 900.00 WHERE user_id = '...'
           โ
9. ะะพะทะฒัะฐั ััะฐะฒะบะธ ะบะปะธะตะฝัั:
   { id: 1, eventName: "...", status: "pending", ... }
           โ
10. React ะพะฑะฝะพะฒะปัะตั UI โ ะฟะพะบะฐะทัะฒะฐะตั ะฝะพะฒัะน ะฑะฐะปะฐะฝั ะธ ััะฐะฒะบั

๐๏ธ ะะฐัะฟัะตะดะตะปะตะฝะธะต ะฝะฐะณััะทะบะธ: ะะปะธะตะฝั vs ะกะตัะฒะตั
ะะฐ ะบะปะธะตะฝัะต (React ะฒ ะฑัะฐัะทะตัะต):

โ ะงัะพ ะดะตะปะฐะตั:

    ะะตะฝะดะตัะธะฝะณ UI (ัะพัะผั, ัะฐะฑะปะธัั, ะบะฝะพะฟะบะธ)
    ะะฐะปะธะดะฐัะธั ัะพัะผ (React Hook Form + Zod)
    ะฃะฟัะฐะฒะปะตะฝะธะต ัะพััะพัะฝะธะตะผ (useState, TanStack Query)
    ะะพััะธะฝะณ (wouter)
    ะะฝะธะผะฐัะธะธ (Framer Motion)
    ะขะตะผะฝะฐั/ัะฒะตัะปะฐั ัะตะผะฐ

โ ะงัะพ ะะ ะดะตะปะฐะตั:

    ะฅัะฐะฝะตะฝะธะต ะฟะฐัะพะปะตะน (ัะพะปัะบะพ ัะพะบะตะฝ ะฒ localStorage)
    ะะธะทะฝะตั-ะปะพะณะธะบะฐ ััะฐะฒะพะบ
    ะะพัััะฟ ะบ ะฑะฐะทะต ะดะฐะฝะฝัั
    ะัะพะฒะตัะบะฐ ะฑะตะทะพะฟะฐัะฝะพััะธ

ะะฐ ัะตัะฒะตัะต (Express):

โ ะงัะพ ะดะตะปะฐะตั:

    ะะฒัะพัะธะทะฐัะธั ัะตัะตะท PocketBase
    ะัะพะฒะตัะบะฐ JWT ัะพะบะตะฝะพะฒ
    ะะธะทะฝะตั-ะปะพะณะธะบะฐ (ะฟัะพะฒะตัะบะฐ ะฑะฐะปะฐะฝัะฐ, ัะฐััะตั ะฒัะธะณัััะฐ)
    ะะฐะฑะพัะฐ ั PostgreSQL (ัะพะทะดะฐะฝะธะต/ััะตะฝะธะต ััะฐะฒะพะบ ะธ ะบะพัะตะปัะบะพะฒ)
    ะะฐะปะธะดะฐัะธั ะดะฐะฝะฝัั ะฝะฐ ััะพัะพะฝะต ัะตัะฒะตัะฐ (Zod)
    ะะพะณะธัะพะฒะฐะฝะธะต ะทะฐะฟัะพัะพะฒ

โ ะงัะพ ะะ ะดะตะปะฐะตั:

    ะะตะฝะดะตัะธะฝะณ HTML (ััะพ ะดะตะปะฐะตั React)
    ะฅัะฐะฝะตะฝะธะต ะฟะฐัะพะปะตะน (ััะพ ะดะตะปะฐะตั PocketBase)

๐ ะะฐะบะธะต ะฑะฐะทั ะดะฐะฝะฝัั ะธัะฟะพะปัะทััััั
1. PocketBase (ะฒะฝะตัะฝะธะน ัะตัะฒะธั)

ะฅัะฐะฝะธั:

    ะขะฐะฑะปะธัะฐ users (id, email, password_hash, name, avatar)
    JWT ัะพะบะตะฝั

ะะพะปั: ะััะตะฝัะธัะธะบะฐัะธั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
2. PostgreSQL (ะฝะฐ Replit)

ะฅัะฐะฝะธั:

-- ะขะฐะฑะปะธัะฐ ะบะพัะตะปัะบะพะฒ
wallets (
  id SERIAL,
  user_id VARCHAR(255) UNIQUE,  -- ัะฒัะทั ั PocketBase user.id
  balance DECIMAL(12,2),         -- ัะตะบััะธะน ะฑะฐะปะฐะฝั
  created_at TIMESTAMP,
  updated_at TIMESTAMP
)

-- ะขะฐะฑะปะธัะฐ ััะฐะฒะพะบ
bets (
  id SERIAL,
  user_id VARCHAR(255),          -- ัะฒัะทั ั PocketBase user.id
  event_name TEXT,               -- "ะคััะฑะพะป: ะะฐััะตะปะพะฝะฐ vs ะะตะฐะป"
  selection TEXT,                -- "ะะฐััะตะปะพะฝะฐ"
  odds DECIMAL(6,2),             -- 2.50
  amount DECIMAL(12,2),          -- 100.00
  potential_win DECIMAL(12,2),   -- 250.00
  status VARCHAR(20),            -- 'pending', 'won', 'lost'
  result VARCHAR(20),            -- 'win', 'loss', NULL
  created_at TIMESTAMP,
  settled_at TIMESTAMP
)

ะะพะปั: ะฅัะฐะฝะตะฝะธะต ัะธะฝะฐะฝัะพะฒัั ะดะฐะฝะฝัั ะธ ััะฐะฒะพะบ
๐ ะะฐะบ ัะฐะฑะพัะฐะตั ะฑะตะทะพะฟะฐัะฝะพััั

    ะะฐัะพะปะธ: ะฅัะฐะฝัััั ะฒ PocketBase (ัะตัะธัะพะฒะฐะฝะฝัะต bcrypt)
    ะขะพะบะตะฝั: JWT ะพั PocketBase, ััะพะบ ะดะตะนััะฒะธั ~2 ะฝะตะดะตะปะธ
    ะัะพะฒะตัะบะฐ ัะพะบะตะฝะฐ: ะะฐ ะบะฐะถะดัะน ะทะฐะฟัะพั ะบ /api/* ัะตัะฒะตั ะฟัะพะฒะตััะตั ัะพะบะตะฝ
    ะะฐะปะธะดะฐัะธั: Zod ััะตะผั ะฝะฐ ะบะปะธะตะฝัะต ะ ัะตัะฒะตัะต
    SQL ะธะฝัะตะบัะธะธ: Drizzle ORM ะทะฐัะธัะฐะตั ะพั ะฝะธั ะฐะฒัะพะผะฐัะธัะตัะบะธ

๐ ะะตะทัะผะต: ััะพ ะฟัะพะธััะพะดะธั ะฟัะธ ัะฐะฑะพัะต ะฟัะธะปะพะถะตะฝะธั

    ะะพะปัะทะพะฒะฐัะตะปั ะพัะบััะฒะฐะตั ัะฐะนั โ React ะฟัะธะปะพะถะตะฝะธะต ะทะฐะณััะถะฐะตััั
    ะะฒะพะดะธั ะปะพะณะธะฝ/ะฟะฐัะพะปั โ ะะฐะฟัะพั ะฝะฐ Express โ PocketBase โ ะฟะพะปััะฐะตั JWT
    ะะฐัะพะดะธั ะฝะฐ ะดะฐัะฑะพัะด โ JWT ะฟัะพะฒะตััะตััั ะฟัะธ ะบะฐะถะดะพะผ ะทะฐะฟัะพัะต
    ะกะพะทะดะฐะตั ััะฐะฒะบั โ Express ะฟัะพะฒะตััะตั ะฑะฐะปะฐะฝั ะฒ PostgreSQL โ ัะพะทะดะฐะตั ะทะฐะฟะธัั
    ะะธะดะธั ะธััะพัะธั ััะฐะฒะพะบ โ Express ัะธัะฐะตั ะธะท PostgreSQL โ ะพัะดะฐะตั ะบะปะธะตะฝัั

ะัะต ะทะฐะฟัะพัั ะพะฑัะฐะฑะฐััะฒะฐัััั ะฝะฐ ะพะดะฝะพะผ ะฟะพััั 5000:

    / โ ััะฐัะธะบะฐ (React)
    /api/* โ Express API

ะญัะพ ัะฟัะพัะฐะตั ะดะตะฟะปะพะน ะธ ะฝะต ััะตะฑัะตั ะฝะฐัััะพะนะบะธ CORS!
